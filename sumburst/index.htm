<!doctype html>
  <html lang=en>
  <head>
    <meta charset=utf-8>
    <title>opayra lab: summa sunburst</title>
    <script src='https://cdn.plot.ly/plotly-2.22.0.min.js'></script>
    <script src="./jjSunburst.js"></script>
    <style>
      .main-svg {
        border: 2px solid grey;
        padding: 25px;
      }

      .legend {
        margin-top: 60px;
        margin-left: 20px;
        border: 4px solid steelblue;
        width: 200px;
        padding-left: 10px;
        padding-bottom: 12px;
      }

      .legend>p {
        font-size: 18px;
        color: steelblue;
      }

    </style>
  </head>
  
  <body>
    <h4>popay nl - job journey - summa - competence sunburst - plotly - poc</h4>

    <a href="https://plotly.com/javascript/reference/sunburst/">plotly - sunburst reference</a>

    <p>
      <li>polar bar - sunburst implementation with competence levels and radial labels within a competence lane.
      <li>legend of groups: click interaction for highlighting of group
    </p>

    <ul>
      <li>rework legend ? (plotly legend via non-visible bar traces per group competence)</li>
      <li>status fill w pattern: 3 hacks needed</li>
    </ul>
    
    <h4>student start position</h4>
    <div id='idVis1'></div>
    <br>
    <div class="legend">
      <p>beroepscompetenties</p>
      <div id='idVisLegend1'></div>
    </div>
    <br><br>

    <h4>student mid career</h4>
    <div id='idVis2'></div>
    <br>
    <div class="legend">
      <p>beroepscompetenties</p>
      <div id='idVisLegend2'></div>
    </div>
    <br><br>

    <h4>student at the end</h4>
    <div id='idVis3'></div>
    <br>
    <div class="legend">
      <p>beroepscompetenties</p>
      <div id='idVisLegend3'></div>
    </div>
    <br><br>

    <script>
      let studentStart = {
        "levels": 4,
        "group": [
          {
            "name": "group 1",
            "color": "red",
            "competence": [
                { "level": 1, "name": "group 1 - comp 1 <br>en <i>nog</i> wat langerrr"},  // understands <br> & other html tags
                { "level": 1, "name": "group 1 - <a href='https://www.popay.com'>comp 2</a>"}  // and urls
            ]
          }, {
            "name": "group 2",
            "color": "steelblue",
            "competence": [
                { "level": 1, "name": "group 2 - comp 1", "statusNr": 1},
                { "level": 1, "name": "group 2 - comp 2", "statusNr": 1},
                { "level": 1, "name": "group 2 - comp 3", "statusNr": 1},
                { "level": 1, "name": "group 2 - comp 4", "statusNr": 1}
            ]
          }, {
            "name": "muziek",
            "color": "green",
            "competence": [
                { "level": 1, "name": "notenleer", "statusNr": 1},
                { "level": 1, "name": "triangel"},
                { "level": 1, "name": "trommel", "statusNr": 1},
                { "level": 1, "name": "zang", "statusNr": 1}
            ]
          }
        ]
      };
      jj.plotSunburst( studentStart, 'idVis1', 'idVisLegend1');


      let studentMidPlus5 = {
        "levels": 4,
        "group": [
          {
            "name": "group 1",
            "color": "red",
            "competence": [
                { "level": 2, "name": "group 1 - comp 1 <br>en <i>nog</i> wat langerrr"},  // understands <br> & other html tags
                { "level": 2, "name": "group 1 - <a href='https://www.popay.com'>comp 2</a>"}  // and urls
            ]
          }, {
            "name": "group 2",
            "color": "steelblue",
            "competence": [
                { "level": 1, "name": "group 2 - comp 1", "statusNr": 1},
                { "level": 2, "name": "group 2 - comp 2", "statusNr": 1},
                { "level": 3, "name": "group 2 - comp 3", "statusNr": 4},
                { "level": 2, "name": "group 2 - comp 4", "statusNr": 4}
            ]
          }, {
            "name": "muziek",
            "color": "green",
            "competence": [
                { "level": 1, "name": "notenleer", "statusNr": 3},
                { "level": 5, "name": "triangel"},
                { "level": 4, "name": "trommel", "statusNr": 2},
                { "level": 3, "name": "zang", "statusNr": 2}
            ]
          }
        ]
      };
      jj.plotSunburst( studentMidPlus5, 'idVis2', 'idVisLegend2');

      jj.plotSunburst( {
        "levels": 4,
        "group": [
          {
            "name": "group 1",
            "color": "red",
            "competence": [
                { "level": 4, "statusNr": 3, "name": "group 1 - comp 1 <br>en <i>nog</i> wat langerrr"},  // understands <br> & other html tags
                { "level": 4, "statusNr": 3, "name": "group 1 - <a href='https://www.popay.com'>comp 2</a>"}  // and urls
            ]
          }, {
            "name": "group 2",
            "color": "steelblue",
            "competence": [
                { "level": 4, "name": "group 2 - comp 1", "statusNr": 4},
                { "level": 4, "name": "group 2 - comp 2", "statusNr": 3},
                { "level": 4, "name": "group 2 - comp 3", "statusNr": 2},
                { "level": 4, "name": "group 2 - comp 4", "statusNr": 1}
            ]
          }, {
            "name": "muziek",
            "color": "green",
            "competence": [
                { "level": 4, "name": "notenleer", "statusNr": 4},
                { "level": 5, "name": "triangel", "statusNr": 3},
                { "level": 4, "name": "trommel", "statusNr": 2},
                { "level": 4, "name": "zang", "statusNr": 1}
            ]
          }
        ]
        }, 
        'idVis3', 
        'idVisLegend3'
      );


    </script>
  </body>
</html>